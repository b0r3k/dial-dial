
\chapter{Dialogové systémy obecně}

Jak název napovídá, dialogové systémy vedou dialog s uživatelem. Jsou to
tedy jakékoliv programy (nebo skupiny programů) využívající
pro komunikaci přirozený jazyk, obvykle ve formě textové nebo hlasové.
Vyčerpávající shrnutí tohoto tématu, souvisejících problémů a metod
jejich řešení můžeme najít v rozpracované knize
\textit{Speech and Language Processing} \citep{jurafsky_slp_2020},
ze které jsme čerpali mnoho znalostí.

\section{Dělení}
Můžeme je dělit dle mnoha různých specifik. Uvedeme nějaká
základní běžně používaná, ale rozhodně nebudou všechna.

Asi vůbec
nejzákladnějším je dělení na systémy \textit{zaměřené na plnění úkolů}
(rozšířený je anglický termín \textit{task-oriented}), jejichž úkolem
je dosáhnout nějakého uživatelova cíle; a \uv{\textit{tlachací}} (anglicky
\textit{chitchat}), jejichž úkolem je jen vést s uživatelem smysluplnou
konverzaci.

\textit{Doménou} systému se rozumí téma, kterému by se měl být schopen
věnovat. Podle toho, zda to dokáže jen u jednoho, nebo u více různých,
můžeme systém nazývat \textit{jednodoménový} nebo \textit{vícedoménový}.

Dále můžeme systémy dělit podle toho, kdo řídí dialog. Dotaz či změnu tématu
může iniciovat vždy pouze uživatel a systém jen odpovídat, nebo naopak, nebo
se mohou v iniciativě střídat. Implementace posledního jmenovaného je samozřejmě
nejkomplikovanější.

Posledním dělením, které uvedeme, je podle kanálů komunikace, tedy
v jaké prvotní formě je informace mezi uživatelem a systémem předávána.
Obvykle je forma na obou stranách stejná, může se však i lišit. Mezi
nejčastější patří text, mluvená řeč a obraz (ať už statický nebo
dynamický), ale existují již i roboti schopni vyjadřovat emoce pomocí
mimiky.

My se nadále budeme zabývat systémem zaměřeným na plnění úkolů v rámci jedné
domény, který má jako vstup i výstup mluvenou řeč, protože tím námi
implementovaná aplikace je.

\section{Problémy ve zpracování dialogu}

Při trochu podrobnějším pohledu na většinu rozhovorů zjistíme, že nejsou
tak jednoduché a přímočaré, jak si je představíme. To dále ztěžuje
veškeré strojové zpracování. Některé komplikace umíme řešit jen do určité
míry, některé zatím vůbec.

TODO možná nějaká ukázka

\subsection{Začátek a konec}

Prvním problémem je jak vůbec zjistit, kdy uživatel dialog začal, kdy
skončil svůj \textit{tah} a očekává odpověď, a kdy skončil celý dialog.
Jako lidé většinou začátek dialogu jsme schopni rozpoznat tím, že se na
nás druhý podívá či nás osloví. Pohled u stroje s pouze zvukovým vstupem
detekovat schopni nejsme, oslovení dnešní technologie již dokáží. Většinou
definujeme jedno nebo několik slov, které stroj chápe jako začátek dialogu,
tzv. \textit{wake words}. Součást systému detekující tato slova musí být velmi
energeticky úsporná, protože musí běžet neustále. Dnes jsou obvykle
využívány komponenty využívající hlubokého učení, jako třeba Howl
\citep{tang_howl_2020}.
Běžným způsobem je ale stále zahájení dialogu stiskem tlačítka či něčím
podobným.

Zahájení jsme tedy detekovali, ale jak poznat konec? Za konec tahu je
většinou považována delší pauza, v takovou chvíli systém vyhodnotí odpověď
a začne odpovídat. Problém je, pokud jsme konec tahu detekovali špatně a
v průběhu systémové odpovědi začne uživatel opět mluvit. V lidské konverzaci
se to stává běžně a umíme se s tím jednoduše vypořádat, protože jsme schopni
zároveň mluvit a poslouchat. U strojů to však problém je, běžnou praxí asistentů
je proto začít znovu poslouchat až po ukončení jejich promluvy.

Úplný konec dialogu většinou detekujeme buď explicitně, zvolenými klíčovými
slovy (třeba \uv{konec}) či frázemi (rozloučení); nebo implicitně, pokud
systém splní uživatelův cíl či uživatel již neodpoví.

\subsection{Zpracování zvuku}

Při převodu mluveného slova na text narážíme na problémy spousty nepřesností.
Přepis nám ztěžuje okolní hluk, který dokážeme odfiltrovat jen do určité míry
a obtížně. Navíc pokud dojde k chybě v nějakém slově, můžeme se ji sice snažit
z kontextu nějak zpětně opravit, ale opět je to složitá práce navíc. Člověk
tyto drobné opravy na základě kontextu dělá podvědomě a bravurně.

Dále se potýkáme s různou výslovností různých lidí, přeřeky, opravami
či výplňovými zvuky, kdy se mluvčí rozmýšlí, co chce říct dál. Zvláště
pokud se něco takového vyskytne uprostřed slova, může být obtížné dát
strojově dohromady výsledek promluvy.

\subsection{Očekávané znalosti, domýšlení}

Při běžné komunikaci člověk od druhého očekává určitou míru přehledu o světě
-- minimálně fakta typu že Slunce je na obloze považujeme za samozřejmá.
Systému však všechny tyto znalosti musíme nějakým způsobem předat, buď
explicitně, nebo u pokročilých modelů strojového učení dodat potřebná
data.